package model;

import java.awt.*;
import javax.swing.*;

import var.Vars;


public class NorthPanel extends JPanel{
	private Color rentForeColor=null,rentBackColor=null;
	private JButton changeForeColorButton = new JButton("修改前景色  目前："+rentForeColor);
	private JButton changeBackColorButton = new JButton("修改背景色  目前："+rentBackColor);
	private JTextField textField = new JTextField(20);
	public NorthPanel() {
		setLayout(new GridLayout(2,2));
		add(changeForeColorButton);
		add(changeBackColorButton);
		add(textField);
		changeForeColorButton.addActionListener(e ->{
			JColorChooser colorChooser =new JColorChooser();
			JDialog dialog = JColorChooser.createDialog(Vars.northPanel, "请选择颜色", false, colorChooser, e1 -> Vars.controller.setForeColor(colorChooser.getColor()), null);
			dialog.setVisible(true);
			rentForeColor = colorChooser.getColor();
		});
		changeBackColorButton.addActionListener(e ->{
			JColorChooser colorChooser =new JColorChooser();
			JDialog dialog = JColorChooser.createDialog(Vars.northPanel, "请选择颜色", false, colorChooser, e1 -> Vars.controller.setBackColor(colorChooser.getColor()), null);
			dialog.setVisible(true);
			rentBackColor = colorChooser.getColor();
		});
	//	Vars.controller.setTextString(textField.getText());
	} 
	
	
/*	JComboBox<Color> foreComboBox;
	JComboBox<Color> backComboBox;
	
	Color[] colors = {Color.BLACK,Color.BLUE,Color.CYAN,Color.GRAY,Color.GREEN,Color.MAGENTA,Color.ORANGE,Color.PINK,Color.RED,Color.WHITE,Color.YELLOW};
	private void disableFocusBackground(JComboBox<Color> box) {
		if(box == null) return;
		Component component = box.getEditor().getEditorComponent();
		if(component instanceof JTextField) {
			JTextField field = (JTextField) component;
			field.setEditable(false);
			field.setSelectionColor(field.getForeground()); 
			box.setEditable(true);
		}
	}
	public NorthPanel(){
		foreComboBox = new JComboBox<>(new DefaultComboBoxModel<>(colors));
		backComboBox = new JComboBox<>(new DefaultComboBoxModel<>(colors));
		textField = new JTextField(20);
		setLayout(new GridLayout(2,2));
		add(foreComboBox);
		add(backComboBox);
		add(textField);
		foreComboBox.setRenderer(aRenderer());	
		backComboBox.setRenderer(aRenderer());
	}
	@SuppressWarnings("serial")
	private DefaultListCellRenderer aRenderer() {
		return new DefaultListCellRenderer() {
			@Override
			public Component getListCellRendererComponent(JList<?> list,
					Object value,int index,boolean isSelected,
					boolean cellHasFocus) {
				super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
				setText("");
				setPreferredSize(new Dimension(50,25));
				setForeground((Color.black));
				setBackground((Color) value);
				disableFocusBackground(foreComboBox);
				disableFocusBackground(backComboBox);
				return this;
			}
			 e1 -> Vars.controller.setForeColor(colorChooser.getColor())
		};
	}
*/
}
